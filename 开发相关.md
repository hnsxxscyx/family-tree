- 分析

  - 族谱最高节点仅有一个，即族谱名
    - 族谱名不能重复，根据族谱名进行族谱数据读取
  - 树形组件怎么绘制
    - 使用现成组件
      - Vue-Tree-Chart
      - ECharts（太重了）
    - 自己写
  - 族谱的数据格式限制
    - 输入加存储的双重校验
  - 添加、编辑、删除家谱成员
    - 添加时必须加入 ID
    - 编辑不能漏填
    - 删除时子项会跟着删除吗
      - 当前项被删除则仅与此相关子项也被删除，因为该项也不是家族成员了
    - 删除关系中的直系亲属，则配偶与相关子项也一定被删除
  - 家谱间的关系基本分析
    - 辈分
    - 大小
    - 是否是直系亲属

- 意外情况

  - 父/母 ID 找不到的不予绘制到树中（计算属性中过滤掉）

- 设计思路

  - 将展示与编辑区分开
    - 展示
      - Vue-Tree-Chart 做族谱的展示
        - 需要增加额外的值来展示其他信息
      - 所需数据格式的转换
        - 如何把一个一维数组计算并互相关联（还是一开始弄成树结构方便）
          - 添加的时候同时创建一个树结构
            - 先添加无法进树的结构怎么办？比如先添加子，再添加父。不过你这样不是胡编乱造吗没父 ID 怎么建？
            - ## 修改要移动的子节点也很复杂啊，ID 构的无序树又不是二叉树
            - 添加的时候还要注意，你添加父级节点的时候怎么判定它们是兄妹还是夫妻啊，没办法啊，只能在有子的时候判断夫妻
          - 每次都做计算
            - 性能耗费很多，但是先不管
            - 先找出次级元素
              - 次级元素需判断是否有夫妻
                - 是不是考虑的有点太多了，已目前的数据量来看根本就没有可能说判断出来夫妻。如果一对夫妻没有小孩并且同姓怎么判断？
            - 从上到下找
            - 一次一次的遍历列表中没有被收集到父元素中去
    - 编辑
      - 使用 element 快速搭建
        - 表格呈现数据
        - dialog 修改和删除
  - 数据的存储
    - 位置
      - 由于没有提涉及到大量数据的存放，以及特别提到数据存储方式可以使用浏览器 localStorage，所以 localStorage 仍然是安全的，读取性能瓶颈依然在解析为对象
      - 如果是大规模数据且仍存放在本机中可以尝试使用 web indexedDB
      - 此次快速开发使用 vuex 搭配插件存放在 localStorage 中
    - 以族谱名字为 key 进行存储
    - 单个族谱的存储
      - 以对象对单人信息进行存储
  - 数据格式的转换
    - 转换为 Vue-Tree-Chart 格式
      - 使用计算属性
      - 使用方法，钩子函数调用（都一样，这个更好调试）
  - 关系的计算

    - 遍历整个树来计算，但是我有点小想法
    - 使用 DOM 树来对辈分、直系亲属来判定
      - 在代码里判断
        - 辈分
          - 如何判断辈分
        - 是否直系亲属
          - contains
            - 可以判断直系亲属
          - compareDocumentPosition API
            - 这个 API 用在这不是很好使，只能判断之前之后，同级别的用这个不好判断哇
        - 辈分相同就能比大小了
        - 根据性别来判定给 B 叫啥
        - 上下只判断三级
          -
        - 判定姥爷、舅还是叔这就麻烦了,肯定要看当前的父元素是父还是母
        - 同级的都是老表
          - 需要判定有没有共同的爹或妈
        - 比自己小
          - 不是直系的都是侄子、侄女
          - 是直系的要判断是孙子还是外孙
      - 使用键值对的关系
        - 因为没有多余字段存储关系，这个还是不使用

* 其他
  - 数据输入校验
    - 由于时间紧急，未对输入格式进行校验,仅校验是否都填写
    - 也暂时不对数据的真实性进行校验
  - 树展示的时候果然还是树状结构最好最方便啊，但是列表那儿又得计算。不过应该还是转成树的开销更大

- 未知问题记录
  - 表格中 id 为 0 时，打印和使用的对象 id 为 undefined，vue tools 是 0.。。。这
